{
  "widgets": [
    {
      "type": "log",
      "properties": {
        "query": "SOURCE 'CA_9b4oemVRtDEm'\n| fields @timestamp, total_latency\n| filter _event_type = \"voice_metrics\"\n| stats percentile(total_latency, 95) as p95_latency by bin(5m)",
        "region": "us-west-1",
        "title": "P95 Latency (5min)",
        "yAxis": {
          "left": {
            "min": 0,
            "max": 3
          }
        }
      },
      "width": 6,
      "height": 6,
      "x": 0,
      "y": 0
    },
    {
      "type": "log",
      "properties": {
        "query": "SOURCE 'CA_9b4oemVRtDEm'\n| fields @timestamp\n| filter @message like /ERROR/ or @message like /Exception/\n| stats count(*) as errors by bin(1m)",
        "region": "us-west-1",
        "title": "Error Rate (1min)",
        "yAxis": {
          "left": {
            "min": 0
          }
        }
      },
      "width": 6,
      "height": 6,
      "x": 6,
      "y": 0
    },
    {
      "type": "log",
      "properties": {
        "query": "SOURCE 'CA_9b4oemVRtDEm'\n| fields @timestamp, eou_delay, llm_ttft, tts_ttfb\n| filter _event_type = \"voice_metrics\"\n| stats avg(eou_delay) as EOU, avg(llm_ttft) as LLM, avg(tts_ttfb) as TTS by bin(5m)",
        "region": "us-west-1",
        "stacked": true,
        "title": "Latency Breakdown (5min)",
        "yAxis": {
          "left": {
            "min": 0
          }
        }
      },
      "width": 12,
      "height": 6,
      "x": 0,
      "y": 6
    },
    {
      "type": "log",
      "properties": {
        "query": "SOURCE 'CA_9b4oemVRtDEm'\n| fields @timestamp as timestamp, _session_id as session_id, discovered_signals.team_size as team_size, discovered_signals.monthly_volume as volume\n| filter _event_type = \"session_analytics\"\n| filter team_size >= 5 or volume >= 100\n| filter @timestamp > ago(24h)\n| sort @timestamp desc\n| limit 20",
        "region": "us-west-1",
        "title": "Qualified Leads (24h) - Click Session ID to Debug"
      },
      "width": 6,
      "height": 6,
      "x": 0,
      "y": 12
    },
    {
      "type": "log",
      "properties": {
        "query": "SOURCE 'CA_9b4oemVRtDEm'\n| fields @timestamp as timestamp, _session_id as session_id, @message as error_message\n| filter @message like /ERROR/\n| sort @timestamp desc\n| limit 10",
        "region": "us-west-1",
        "title": "Recent Errors (Last 10) - Click Session ID to View in Langfuse"
      },
      "width": 6,
      "height": 6,
      "x": 6,
      "y": 12
    },
    {
      "type": "log",
      "properties": {
        "query": "SOURCE 'CA_9b4oemVRtDEm'\n| fields @timestamp as timestamp, _session_id as session_id, total_latency as latency_seconds, eou_delay, llm_ttft, tts_ttfb\n| filter _event_type = \"voice_metrics\" and total_latency > 2.0\n| sort @timestamp desc\n| limit 10",
        "region": "us-west-1",
        "title": "Slow Sessions (>2s latency) - Click Session ID to Analyze"
      },
      "width": 12,
      "height": 6,
      "x": 0,
      "y": 18
    }
  ]
}
